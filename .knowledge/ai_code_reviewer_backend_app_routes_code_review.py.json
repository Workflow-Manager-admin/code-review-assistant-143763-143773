{"is_source_file": true, "format": "Python", "description": "This file defines Flask route handlers for a code review API backend. It includes endpoints for submitting code for AI-generated reviews and suggestions, incorporates authentication via API tokens, calls the OpenAI API for processing, and defines request/response schemas.", "external_files": ["flask.views", "flask_smorest", "flask", "functools", "requests", "marshmallow"], "external_methods": ["wraps from functools", "requests.post"], "published": ["blp"], "classes": [{"name": "CodeSubmissionSchema", "description": "Marshmallow schema for capturing code submission data (code and language)."}, {"name": "CodeReviewResponseSchema", "description": "Marshmallow schema for the AI-generated code review response."}, {"name": "ImprovementSuggestionsSchema", "description": "Marshmallow schema for AI-generated suggestions for code improvements."}, {"name": "ErrorSchema", "description": "Marshmallow schema for error responses."}], "methods": [{"name": "require_auth(f)", "description": "Decorator function that enforces API token authentication, aborting with 401 or 403 if validation fails.", "scope": "", "scopeKind": ""}, {"name": "call_openai_model(prompt, temperature=0.2, max_tokens=512)", "description": "Helper function that constructs a request to the OpenAI API with a prompt and returns the model's response or an error message.", "scope": "", "scopeKind": ""}, {"name": "decorated(*args, **kwargs)", "scope": "require_auth", "scopeKind": "function", "description": "unavailable"}, {"name": "get(self)", "scope": "DummyGetReviewAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self, body)", "scope": "ImprovementSuggestionsAPI", "scopeKind": "class", "description": "unavailable"}], "calls": ["requests.post"], "search-terms": ["Flask API routes", "OpenAI API integration", "code review endpoint", "authorization decorator", "marshmallow schemas", "API key protection", "AI code review", "endpoint for code suggestions"], "state": 2, "file_id": 7, "knowledge_revision": 17, "git_revision": "e399996b4318df2a301d7683ad835f26400e9de4", "revision_history": [{"15": ""}, {"17": "e399996b4318df2a301d7683ad835f26400e9de4"}], "ctags": [{"_type": "tag", "name": "CodeReviewAPI", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^class CodeReviewAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CodeReviewResponseSchema", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^class CodeReviewResponseSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CodeSubmissionSchema", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^class CodeSubmissionSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DummyGetReviewAPI", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^class DummyGetReviewAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ErrorSchema", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^class ErrorSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ImprovementSuggestionsAPI", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^class ImprovementSuggestionsAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ImprovementSuggestionsSchema", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^class ImprovementSuggestionsSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^blp = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "call_openai_model", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^def call_openai_model(prompt, temperature=0.2, max_tokens=512):$/", "language": "Python", "kind": "function", "signature": "(prompt, temperature=0.2, max_tokens=512)"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    code = fields.Integer()$/", "language": "Python", "kind": "variable", "scope": "ErrorSchema", "scopeKind": "class"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    code = fields.String(required=True, description=\"The code snippet to review.\")$/", "language": "Python", "kind": "variable", "scope": "CodeSubmissionSchema", "scopeKind": "class"}, {"_type": "tag", "name": "decorated", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    def decorated(*args, **kwargs):$/", "file": true, "language": "Python", "kind": "function", "signature": "(*args, **kwargs)", "scope": "require_auth", "scopeKind": "function"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    errors = fields.Dict(keys=fields.String(), values=fields.Raw())$/", "language": "Python", "kind": "variable", "scope": "ErrorSchema", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DummyGetReviewAPI", "scopeKind": "class"}, {"_type": "tag", "name": "language", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    language = fields.String(required=True, description=\"Programming language of the code.\")$/", "language": "Python", "kind": "variable", "scope": "CodeSubmissionSchema", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    message = fields.String()$/", "language": "Python", "kind": "variable", "scope": "ErrorSchema", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    def post(self, body):$/", "language": "Python", "kind": "member", "signature": "(self, body)", "scope": "CodeReviewAPI", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    def post(self, body):$/", "language": "Python", "kind": "member", "signature": "(self, body)", "scope": "ImprovementSuggestionsAPI", "scopeKind": "class"}, {"_type": "tag", "name": "require_auth", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^def require_auth(f):$/", "language": "Python", "kind": "function", "signature": "(f)"}, {"_type": "tag", "name": "review", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    review = fields.String(description=\"AI-generated review of the submitted code.\")$/", "language": "Python", "kind": "variable", "scope": "CodeReviewResponseSchema", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    status = fields.String()$/", "language": "Python", "kind": "variable", "scope": "ErrorSchema", "scopeKind": "class"}, {"_type": "tag", "name": "suggestions", "path": "/home/kavia/workspace/code-generation/code-review-assistant-143763-143773/ai_code_reviewer_backend/app/routes/code_review.py", "pattern": "/^    suggestions = fields.String(description=\"AI-generated suggestions for code improvements.\")$/", "language": "Python", "kind": "variable", "scope": "ImprovementSuggestionsSchema", "scopeKind": "class"}], "hash": "57dda9c22317e927334bd0a76fc65bfa", "format-version": 4, "code-base-name": "ai_code_reviewer_backend", "filename": "ai_code_reviewer_backend/app/routes/code_review.py", "fields": [{"name": "blp = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "code = fields.Integer()", "scope": "ErrorSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "code = fields.String(required=True, description=\"The code snippet to review.\")", "scope": "CodeSubmissionSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "errors = fields.Dict(keys=fields.String(), values=fields.Raw())", "scope": "ErrorSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "language = fields.String(required=True, description=\"Programming language of the code.\")", "scope": "CodeSubmissionSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "message = fields.String()", "scope": "ErrorSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "review = fields.String(description=\"AI-generated review of the submitted code.\")", "scope": "CodeReviewResponseSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "status = fields.String()", "scope": "ErrorSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "suggestions = fields.String(description=\"AI-generated suggestions for code improvements.\")", "scope": "ImprovementSuggestionsSchema", "scopeKind": "class", "description": "unavailable"}]}